<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>리액트 필수 Javascript 핵심 문법</title>
</head>
<body>
    <h1>리액트 필수 Javascript 핵심 문법</h1>
    <h2>1. 화살표 함수 arrow function</h2>
    <button id="btn">클릭 테스트</button>
    <h2>2. 구조 분해 할당 destructurig assignment</h2>
    <h2>3. 스프레드 연산자 spread operator</h2>
    <h2>4. map() 메서드</h2>
    <h2>5. ajax axios asyn / await</h2>
    <h2>6. 별도 파일 module : export / import</h2>
    <script>
        // 1. 화살표 함수 arrow function - React의 이벤트 핸들러 필수!
        /*
            const handleClick = function(){} 
            위의 익명 함수를 더 축약한 것이 react! 아래와 같다.
        */
        const handleClick = () => {
            alert("React처럼 이벤트 처리");
            console.log("화살표 함수로 이벤트 처리");
        }
        document.getElementById("btn").addEventListener("click", handleClick);
        /*
            React : <button onClick=(handleClick)>
        */
        
        // 2. 구조 분해 할당 (destructurig assignment) - React props 와 useState 함수
        const user = {name : "손흥민", age : 33, city : "LA"};
        // user 객체의 변수 정보가 아주 많다고 가정
        // user 객체의 일부 name과 city만 필요하여 추출하여 새로운 객체로 만들고자 함
        const {name, city} = user;   // 필요한 것만 추출
        console.log("구조 분해 할당으로 추출 : ", name, city);

        // React useState 패턴 (아주 많이 쓰임)
        const [count, setCount] = [7, (count) => {console.log(count)}];
        console.log("userState 패턴 : ", count);
        console.log(setCount);
        setCount(9);    // 리액트에서는 이렇게 set 메서드를 이용해야 화면에 랜더링된다.
        // React props : 컴포넌트 외부(상위)에서 컴포넌트로 정보를 전달할 때 사용하는 기술
        const profile = ({name, age}) => {
            return `${name} ${age}세`;
        }
        console.log("구조 분해 할당 테스트 ", profile({name:"조규성", age:"28"}));
        // 구조 분해 할당 시 기본 값 설정
        const profile2 = ({name = "익명", age = 0}) => {
            return `${name} ${age}세`;
        }

        console.log("구조 분해 할당 테스트2 ", profile2({}));

        // 스프레드 연산자 - React state -> 불변성 필수
        // React state 배열 업데이트 시 사용
        const todos = ["여행하기", "운동하기"];
        const newTodos = [...todos, "쇼핑하기"];    // 새 배열 생성
        console.log("배열 불변성 : ", newTodos);
        // React state 객체 업데이트
        const userState = {name:"손흥민", age:30};
        const updatedUser = {...userState, city:"서울"};
        console.log("객체 불변성 : ", updatedUser);
        // 아래와 같이 속성을 중복명시하면 update가 된다.
        const updatedUser2 = {...userState, city:"서울", age:33};
        console.log("객체 불변성 : ", updatedUser2);
        /*
            React setState 실제 사용 패턴
            const updateState = (currentState, updates) => {
                return {currentState, ...updates};  // 기존 + 새 속성
            }
        */
        // 4. map() 메서드 - React 리스트 랜더링 시 사용
        const users = [
            {id: 1, name: "손흥민", age: 33},
            {id: 2, name: "조규성", age: 28},
            {id: 3, name: "카스", age: 26}
        ]; // -> rest api 서버에서 오는 값들

        // React 컴포넌트 리스트 랜더링 시 key 포함 필수
        const userComponents = users.map((user) => {
            // 여러 줄 일 경우 return으로 반환
            return {
                key: user.id,
                jsx: `<div key="${user.id}"> ${user.name} ${user.age}세 `
            };
        });
        console.log("React 리스트 리랜더링 map");
        userComponents.forEach(item => console.log(item.key, item.jsx));

        // 조건부 랜더링, 필터와 함께 사용, 아래 arrow function 조건식이 true 이면 배열 요소로 추가
        const adults = users.filter(user => user.age > 30);
        console.log("30세 이상 선수 배열 ", adults);
    </script>
</body>
</html>